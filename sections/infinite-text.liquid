{% unless section.settings.no_wrap %}
  <style>
    #{{ section.id }} .infinite-text-container > p{
      white-space: nowrap;
    }
  </style>
{% endunless %}

{% if section.settings.max_width != empty %}
  <style>
    #{{ section.id }}{
      max-width: {{section.settings.max_width}}px;
    }
  </style>
{% endif %}

<style>
  #{{ section.id }}{
    width:100%;
    padding-top: {{ section.settings.mobile-p_top }}px;
    padding-bottom: {{ section.settings.mobile-p_bottom }}px;
    padding-left: {{ section.settings.mobile-p_left }}px;
    padding-right: {{ section.settings.mobile-p_right }}px;
    background: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.mobile-font_size }}px;
    margin:0 auto;
  }

  #{{ section.id }} .infinite-text-container{
    display:flex;
    flex-direction:row;
    justify-content:center;
    align-items:center;
    overflow:hidden;
  }

  #{{ section.id }} .infinite-text-container > p{
    width:100%;
    text-align:center;
    margin:0;
    padding:8px 5px;
    font-size:inherit;
    line-height:100%;
  }

  #{{ section.id }} .infinite-text-container > p.custom_bg{
    background-color:{{ section.settings.custom_bg_color }};
  }

  @media screen and (min-width:992px){
    #{{ section.id }}{
      padding-top: {{ section.settings.desktop-p_top }}px;
      padding-bottom: {{ section.settings.desktop-p_bottom }}px;
      padding-left: {{ section.settings.desktop-p_left }}px;
      padding-right: {{ section.settings.desktop-p_right }}px;
      font-size: {{ section.settings.desktop-font_size }}px;
    }
  }
</style>

{% if section.blocks.size >= 1 %}
  <section id="{{ section.id }}" class="infinite-text">
    <div class="infinite-text-container">
      {% for block in section.blocks %}
        {% if block.settings.custom_bg %}
          {{ block.settings.text | replace: '<p', '<p class="custom_bg"' }}
        {% else %}
          {{ block.settings.text }}
        {% endif %}
      {% endfor %}
    </div>
  </section>
{% endif %}

{% schema %}
{
  "name": "Infinite text",
  "settings": [
    {
      "type": "header",
      "content": "Universal Settings"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Colour",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Colour",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "custom_bg_color",
      "label": "Second Background Colour",
      "default": "#FFFFFF"
    },
    {
      "type": "text",
      "label": "Max width",
      "info": "Enter the value in px. Ex: 1400, 1250, ...",
      "id": "max_width"
    },
    {
      "type": "checkbox",
      "id": "no_wrap",
      "label": "Wrap text?",
      "default": true
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "range",
      "id": "mobile-font_size",
      "min": 12,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Font Size",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile-p_top",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile-p_bottom",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile-p_right",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Right",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile-p_left",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Left",
      "default": 0
    },
    {
      "type": "header",
      "content": "Desktop Settings"
    },
    {
      "type": "range",
      "id": "desktop-font_size",
      "min": 12,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Font Size",
      "default": 18
    },
    {
      "type": "range",
      "id": "desktop-p_top",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "desktop-p_bottom",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "desktop-p_right",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Right",
      "default": 0
    },
    {
      "type": "range",
      "id": "desktop-p_left",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Padding Left",
      "default": 0
    }
  ],
  "blocks": [
    {
      "name": "Text",
      "type": "text",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        },
        {
          "type": "checkbox",
          "id": "custom_bg",
          "label": "Use Second Background?",
          "default": false
        }
      ]
    }
  ]
}
{% endschema %}
